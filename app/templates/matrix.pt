<!DOCTYPE html>
<html>
    <head>
        <title>Display matrix</title>
        <link rel="stylesheet" href="/static/common.css">
        <style type="text/css">
            .checkbox {
                display: block;
                width: 30px;
                height: 30px;

                background-color: #ffffff;
                border: 1px solid black;
                border-radius: 4px;

                cursor: pointer;
            }

            .checked {
                background-color: green;
            }

            table {
                border-collapse: collapse;
                border: 1px solid #000000;
                width: 100%;
                height: 100%;
            }
            
            table th,td {
        	    border: 1px solid #000000;
        	    text-align: left;
                padding: 5px;
            }

        </style>
        <script type="text/javascript" src="/static/jquery-2.0.3.min.js"></script>
        <script type="text/javascript">
            function toggleButton(event) {
                $("#" + event.target.id).toggleClass("checked");
            }

            function init() {
                $(".checkbox").click(toggleButton);
            }

            function saveAndRefresh() {
                /*$.post("/", {pairs:enabled}, function(result) {
                    console.log($(result));
                });*/
                $('body').append(
                    $('<form/>').attr({'action':'/', 'method': 'post', 'id': 'data_form'})
                );
                var checked = $(".checked").get();
                for(var x = 0; x < checked.length; x++) {
                    $('#data_form').append(
                        $('<input/>').attr({'type':'hidden', 'name': 'data_' + x, 'value': $(checked[x])[0].id})
                    );
                }
                $('body').find('#data_form').submit();
                console.log($('#data_form'));

            }

        </script>

    </head>
    <body onload="init()">
        <div id="container">
            <div id="content">
                <div id="title"><h2>N채ytett채vien sivujen valinta</h2></div>
                <div id="actions">
                    <div class="button" onclick="saveAndRefresh()">Tallenna</div>
                    <div class="button" onclick="window.location.href='/'">Hylk채채 muutokset</div>
                </div>
                <br><br>
                <table>
                    <tr>
                        <th tal:repeat="header table[0]">${header}</th>
                    </tr>
                    <tr tal:repeat="row table[1:]">
                        <td>${row[0]}</td>
                        <td tal:repeat="item row[1:]">
                            <div class="checkbox ${item[1]}" id="cb_${item[0]}" ></div>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    </body>
</html>